{"version":3,"sources":["components/ErrorWidget/ErrorWidget.js","store/data.selectors.ts","components/WeatherWidget/WeatherWidget.js","store/data.actions.ts","components/Search/Search.js","App.js","store/index.js","services/data.service.ts","store/data.reducer.ts","store/root.reducer.js","index.js","services/http.service.ts"],"names":["useStyles","makeStyles","root","color","padding","ErrorWidget","classes","Paper","className","elevation","hasError","state","weather","success","_","isEmpty","error","hasData","getGeoData","has","pick","city","getShortForecast","list","description","WeatherWidget","useSelector","name","country","main","icon","alt","src","appConfig","iconURL","loadSuccess","data","type","payload","loadFailure","Search","dispatch","useDispatch","useState","value","setValue","noValidate","autoComplete","onSubmit","e","preventDefault","getState","a","api","get","result","response","TextField","variant","placeholder","onChange","currentTarget","App","deps","loaded","failed","Typography","DataService","http","this","q","units","initialState","reducer","combineReducers","appid","baseURL","instance","axios","create","responseType","headers","params","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunk","withExtraArgument","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.32abe26b.chunk.js","sourcesContent":["import React from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles({\n  root: {\n    \"background-color\": \"rgb(255, 255, 255, 0.2)\",\n    color: \"white\",\n    padding: \"40px\"\n  }\n})\n\nexport function ErrorWidget() {\n  const classes = useStyles()\n\n  return (\n    <Paper className={classes.root} elevation={0}>\n        Sorry, the specified city was not found.\n    </Paper>\n  );\n}\n","import _ from \"lodash\";\nimport {IState} from \"./store.types\";\nimport {ShortForecast} from \"../services/data.types\";\n\nexport const hasError = (state: IState): boolean => !state.weather.success && !_.isEmpty(state.weather.error);\nexport const hasData = (state: IState): boolean => state.weather.success;\n\nexport const getGeoData = (state: IState): { name: string, country: string } | null =>\n    _.has(state, \"weather.city.name\") ? _.pick(state.weather.city, [\"name\", \"country\"]) : null;\nexport const getShortForecast = (state: IState): ShortForecast | null =>\n    _.has(state, \"weather.list[0].weather[0]\") ? state.weather.list[0].weather[0] : null;\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { getGeoData, getShortForecast } from \"../../store/data.selectors\";\nimport { makeStyles } from \"@material-ui/core\";\nimport Paper from \"@material-ui/core/Paper\";\nimport appConfig from \"../../appConfig.json\";\nimport Avatar from \"@material-ui/core/Avatar\";\n\nconst useStyles = makeStyles({\n  root: {\n    \"background-color\": \"rgb(255, 255, 255, 0.2)\",\n    color: \"white\",\n    padding: \"40px\"\n  },\n  description: {\n    \"text-transform\": \"capitalize\"\n  }\n})\n\nexport function WeatherWidget() {\n  const classes = useStyles();\n  const { name, country } = useSelector(getGeoData);\n  const { main, description, icon } = useSelector(getShortForecast);\n\n  return (\n    <Paper className={classes.root} elevation={0}>\n      <p>{`${name}, ${country}`}</p>\n      <img alt=\"weather icon\" src={`${appConfig.iconURL}${icon}@2x.png`} />\n      <p className={classes.description}>{description}</p>\n    </Paper>\n  );\n}\n","import {Action, ActionCreator, Dispatch} from 'redux';\nimport {DataService} from \"../services/data.service\";\n\nexport const LOAD_SUCCESS = \"LOAD_SUCCESS\";\nexport const LOAD_FAILURE = \"LOAD_FAILURE\";\n\nexport const load = (city: String) => async (dispatch: Dispatch, getState: Function, {api} : {api: DataService}) => {\n    try {\n        const result = await api.get(city);\n        dispatch(loadSuccess(result.data));\n    } catch (e) {\n        dispatch(loadFailure(e.response))\n    }\n}\n\nexport const loadSuccess: ActionCreator<Action> = (data: any) => ({\n    type: LOAD_SUCCESS,\n    payload: data\n});\n\nexport const loadFailure: ActionCreator<Action> = (error: any) => ({\n    type: LOAD_FAILURE,\n    payload: error\n});\n","import React, { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core\";\nimport { useDispatch } from \"react-redux\";\nimport { load } from \"../../store/data.actions\";\nimport TextField from \"@material-ui/core/TextField\";\n\nconst useStyles = makeStyles({\n  root: {\n    \"margin\": '50px'\n  }\n})\n\nexport function Search() {\n  const dispatch = useDispatch();\n  const [value, setValue] = useState(\"\");\n  const classes = useStyles();\n\n  const submit = (e) => {\n    e.preventDefault();\n    dispatch(load(value));\n  }\n\n  return (\n    <form className={classes.root} noValidate autoComplete=\"off\" onSubmit={submit}>\n      <TextField\n        variant=\"outlined\"\n        placeholder={\"Enter your city name\"}\n        value={value}\n        onChange={({ currentTarget: { value } }) => setValue(value)} />\n    </form>\n  );\n}\n","import React from 'react';\nimport { useSelector } from \"react-redux\";\nimport { Search, ErrorWidget, WeatherWidget } from \"./components\";\nimport { hasData, hasError } from \"./store/data.selectors\";\nimport { Typography } from \"@material-ui/core\";\nimport './App.scss';\n\nfunction App() {\n  const loaded = useSelector(hasData);\n  const failed = useSelector(hasError);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <Typography variant={\"h2\"}>Weather App</Typography>\n         <Search/>\n        {loaded ? <WeatherWidget/> : failed ? <ErrorWidget/> : null }\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","import thunk from \"redux-thunk\";\nimport { applyMiddleware, createStore } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport { reducer as rootReducer } from \"./root.reducer\";\n\nexport const makeStore = (deps, state) =>\n  createStore(\n    rootReducer,\n    state,\n    composeWithDevTools(applyMiddleware(\n      thunk.withExtraArgument(deps)\n    ))\n  );\n","import {HttpClient} from \"./http.service\";\nimport {WeatherDataType} from \"./data.types\";\nimport {AxiosResponse} from \"axios\";\n\nexport class DataService {\n    constructor(private http: HttpClient) {\n    }\n\n    public get(city: String): Promise<AxiosResponse<{ data: WeatherDataType }>> {\n        return this.http.get({q: city, units: \"metric\"});\n    }\n}\n","import {LOAD_FAILURE, LOAD_SUCCESS} from \"./data.actions\";\nimport {AnyAction} from \"redux\";\n\nconst initialState = {\n    error: null\n};\n\nexport const reducer = (state = initialState, {type, payload}: AnyAction) => {\n    switch (type) {\n        case LOAD_SUCCESS:\n            return {\n                ...payload,\n                error: null,\n                success: true\n            }\n        case LOAD_FAILURE:\n            return {\n                error: payload,\n                success: false\n            }\n        default:\n            return state;\n    }\n};\n","import { combineReducers } from \"redux\";\nimport { reducer as dataReducer } from \"./data.reducer\";\n\nexport const reducer = combineReducers({\n  weather: dataReducer\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { DataService } from \"./services/data.service\";\nimport appConfig from \"./appConfig\";\nimport { Provider } from \"react-redux\";\nimport { makeStore } from \"./store\";\nimport './index.css';\nimport { HttpClient } from \"./services/http.service\";\n\nconst http = new HttpClient(appConfig.appid, appConfig.baseURL);\nconst store = makeStore({ api: new DataService(http)}, {weather: {}});\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","import axios, {AxiosInstance} from 'axios';\n\nexport class HttpClient {\n    private appid: string;\n    protected readonly instance: AxiosInstance;\n\n    public constructor(appid: string, baseURL?: string) {\n        this.appid = appid;\n        this.instance = axios.create({\n            baseURL,\n            responseType: 'json',\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        });\n    }\n\n    public get(params: object) {\n        return this.instance.get(\"\", {\n            params: {\n                ...params,\n                appid: this.appid //workaround because of broken default params in axios\n            }\n        });\n    }\n};\n"],"sourceRoot":""}